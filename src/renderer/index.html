<!DOCTYPE html>
<html lang="fr" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WordPress Automation</title>
  <link rel="icon" type="image/png" href="../../assets/favicon.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Custom Title Bar -->
  <div class="titlebar">
    <div class="titlebar-drag-region">
      <div class="titlebar-icon">
        <img src="../../assets/logo.png" alt="Logo" width="16" height="16">
      </div>
      <div class="titlebar-title">WordPress Automation</div>
    </div>
    <div class="titlebar-controls">
      <button id="themeToggle" class="titlebar-button theme-toggle" title="Changer de thème">
        <svg class="theme-icon moon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
        <svg class="theme-icon sun" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/>
          <line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/>
          <line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
      </button>
      <button id="minimizeBtn" class="titlebar-button" title="Réduire">
        <svg width="12" height="12" viewBox="0 0 12 12">
          <rect x="0" y="5" width="12" height="2" fill="currentColor"/>
        </svg>
      </button>
      <button id="maximizeBtn" class="titlebar-button" title="Agrandir">
        <svg width="12" height="12" viewBox="0 0 12 12">
          <rect x="0" y="0" width="12" height="12" fill="none" stroke="currentColor" stroke-width="1.5"/>
        </svg>
      </button>
      <button id="closeBtn" class="titlebar-button close" title="Fermer">
        <svg width="12" height="12" viewBox="0 0 12 12">
          <path d="M1 1L11 11M11 1L1 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
  </div>

  <div class="container">
    <header>
      <div class="header-logo">
        <img src="../../assets/logo.png" alt="WordPress Logo" class="main-logo">
      </div>
      <h1>WordPress Automation</h1>
      <p class="subtitle">Générateur de projets WordPress automatisé</p>
    </header>

    <main>
      <form id="generateForm">
        <div class="form-group">
          <label for="projectName">Nom du projet</label>
          <input
            type="text"
            id="projectName"
            name="projectName"
            placeholder="mon-projet-wordpress"
            required
            pattern="[a-zA-Z0-9_-]+"
            title="Lettres, chiffres, tirets et underscores uniquement"
          />
        </div>

        <div class="form-group">
          <label for="databaseName">Nom de la base de données</label>
          <input
            type="text"
            id="databaseName"
            name="databaseName"
            placeholder="ma_base_de_donnees"
            required
            pattern="[a-zA-Z0-9_]+"
            title="Lettres, chiffres et underscores uniquement"
          />
        </div>

        <div class="form-group">
          <label for="destinationPath">Chemin de destination</label>
          <div class="input-with-button">
            <input
              type="text"
              id="destinationPath"
              name="destinationPath"
              placeholder="/opt/lampp/htdocs/www/eraste/wordpress"
              required
            />
            <button type="button" id="browseBtn" class="btn-secondary">Parcourir</button>
          </div>
          <small>Le projet sera créé dans: <span id="fullPath">&lt;destination&gt;/&lt;nom-projet&gt;</span></small>
        </div>

        <div class="form-section">
          <h3 class="section-title">Options avancées (facultatif)</h3>

          <div class="form-group">
            <label for="themesPath">
              <input type="checkbox" id="enableThemes" class="checkbox-toggle">
              Importer des thèmes depuis un dossier
            </label>
            <div class="input-with-button conditional-input" id="themesPathGroup">
              <input
                type="text"
                id="themesPath"
                name="themesPath"
                placeholder="Chemin vers le dossier contenant les thèmes (.zip/.rar)"
                disabled
              />
              <button type="button" id="browseThemesBtn" class="btn-secondary" disabled>Parcourir</button>
            </div>
            <small>Sélectionnez un dossier contenant des archives de thèmes (.zip ou .rar)</small>
          </div>

          <div class="form-group">
            <label for="pluginsPath">
              <input type="checkbox" id="enablePlugins" class="checkbox-toggle">
              Importer des plugins depuis un dossier
            </label>
            <div class="input-with-button conditional-input" id="pluginsPathGroup">
              <input
                type="text"
                id="pluginsPath"
                name="pluginsPath"
                placeholder="Chemin vers le dossier contenant les plugins (.zip/.rar)"
                disabled
              />
              <button type="button" id="browsePluginsBtn" class="btn-secondary" disabled>Parcourir</button>
            </div>
            <small>Sélectionnez un dossier contenant des archives de plugins (.zip ou .rar)</small>
          </div>
        </div>

        <button type="submit" id="generateBtn" class="btn-primary">Générer</button>
      </form>

      <div id="statusSection" class="status-section hidden">
        <h2>Statut de génération</h2>
        <div class="status-list">
          <div class="status-item" id="status-copy">
            <span class="status-icon">○</span>
            <span class="status-text">Copie du dossier WordPress</span>
          </div>
          <div class="status-item" id="status-config">
            <span class="status-icon">○</span>
            <span class="status-text">Configuration du wp-config.php</span>
          </div>
          <div class="status-item" id="status-database">
            <span class="status-icon">○</span>
            <span class="status-text">Création de la base de données</span>
          </div>
          <div class="status-item hidden" id="status-themes">
            <span class="status-icon">○</span>
            <span class="status-text">Installation des thèmes</span>
          </div>
          <div class="status-item hidden" id="status-plugins">
            <span class="status-icon">○</span>
            <span class="status-text">Installation des plugins</span>
          </div>
        </div>
        <div id="statusMessage" class="status-message"></div>
      </div>

      <div id="vhostSection" class="vhost-section hidden">
        <h2>Configuration VirtualHost et Hosts</h2>
        <p class="vhost-intro">Copiez et collez ces configurations dans vos fichiers système :</p>

        <div class="config-block">
          <div class="config-header">
            <h3>VirtualHost Apache</h3>
            <div class="config-path">
              <span class="label">Ubuntu:</span> <code>/etc/apache2/sites-available/<span id="vhostFilename"></span></code><br>
              <span class="label">LAMPP/XAMPP:</span> <code>/opt/lampp/etc/extra/httpd-vhosts.conf</code>
            </div>
            <button id="copyVhostBtn" class="btn-copy">Copier</button>
          </div>
          <pre id="vhostConfig" class="config-content"></pre>
        </div>

        <div class="config-block">
          <div class="config-header">
            <h3>Fichier Hosts</h3>
            <div class="config-path">
              <span class="label">Linux:</span> <code>/etc/hosts</code><br>
              <span class="label">Windows:</span> <code>C:\Windows\System32\drivers\etc\hosts</code>
            </div>
            <button id="copyHostsBtn" class="btn-copy">Copier</button>
          </div>
          <pre id="hostsConfig" class="config-content"></pre>
        </div>

        <div class="config-instructions">
          <h4>Instructions :</h4>
          <ol>
            <li>Copiez la configuration VirtualHost et collez-la dans votre fichier de configuration Apache</li>
            <li>Copiez l'entrée Hosts et ajoutez-la à votre fichier hosts</li>
            <li>Redémarrez Apache : <code>sudo systemctl restart apache2</code> ou <code>sudo /opt/lampp/lampp restart</code></li>
            <li>Accédez à votre site : <a href="#" id="siteLink" target="_blank"></a></li>
          </ol>
        </div>
      </div>
    </main>

    <footer>
      <div id="dbStatus" class="db-status">
        <span class="status-indicator" id="dbIndicator">●</span>
        <span id="dbStatusText">Connexion MySQL non testée</span>
        <button id="testDbBtn" class="btn-link">Tester</button>
      </div>
    </footer>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
